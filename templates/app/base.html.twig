{% extends 'base.html.twig' %}

{% block head_meta %}
    {{ parent() }}

    <meta name="algolia-app-id" content="{{ algolia_app_id|escape('html_attr') }}">
    <meta name="algolia-api-key" content="{{ algolia_public_api_key|escape('html_attr') }}">

    {% if app.environment == 'prod' %}
        {% if google_tag_manager_id %}
            {% include 'app/scripts/google-tag-manager.html.twig' with { id: google_tag_manager_id } only %}
        {% endif %}
        {% if hotjar_id %}
            {% include 'app/scripts/hotjar.html.twig' with { id: hotjar_id } only %}
        {% endif %}
    {% endif %}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('build/app/styles.css') }}">
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('build/app/scripts.js') }}"></script>
{% endblock %}

{% block body %}
    {% if google_tag_manager_id %}
        {% include 'app/scripts/google-tag-manager-iframe.html.twig' with { id: google_tag_manager_id } %}
    {% endif %}

    {% block navbar %}
        {% if is_granted('ROLE_ADMIN') %}
            {% include 'admin/component/navbar.html.twig' %}
        {% endif %}
        {% include 'app/component/navbar.html.twig' %}
    {% endblock %}

    {% block main %}{% endblock %}

    {% block body_end %}
        {% include 'app/component/flash-messages.html.twig' %}
    {% endblock %}

    {% if google_analytics_key %}
        {% include 'app/scripts/google-analytics.html.twig' with { id: google_analytics_key } only %}
    {% endif %}
{% endblock %}